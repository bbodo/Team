<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MyPage">   

	<select id="MyPageNoteSelect" resultType = "com.green.myPage.vo.MyPageVo">
		SELECT  b.BOARD_TITLE, m.NICKNAME
		FROM	BOARD b INNER JOIN MEMBER m ON b.USERCODE = m.USERCODE
		WHERE	b.BOARD_IDX = #{board_idx} 
	</select>
	
	<insert id="MyPageNoteInsert">
	
		INSERT INTO
			NOTE
			(
				NOTE_IDX,
				NOTE_TITLE,
				NOTE_CONT,
				NOTE_REGDATE,
				SEND_USERCODE,
				RECEIVER_USERCODE,
				READMARK,
				DELNOTE
			)
		VALUES
			(
				(SELECT  NVL( MAX(NOTE_IDX), 0 ) + 1 FROM NOTE),
				#{ notetitle },
				#{ notecont },
				to_date(sysdate,'yyyy.mm.dd hh24:mi'),
				4,
				#{ receiver_usercode },
				0,
				0
			)
	</insert>
	
	<select id="MyPageList" resultType = "com.green.myPage.vo.MyPageVo">
		SELECT 	NOTE_IDX, NOTE_TITLE, NOTE_CONT, NOTE_REGDATE, 
				SEND_USERCODE, RECEIVER_USERCODE, READMARK, DELNOTE
		FROM	NOTE
		WHERE	SEND_USERCODE = #{usercode} 
	</select>

</mapper>





   